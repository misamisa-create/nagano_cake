<div class="container">
  <div class="row">
    <h2>商品詳細</h2>
    <div class="col-3">
      <!--こちらの書き方に変更-->
      <%= attachment_image_tag @item, :image, format: 'jpeg', size: "100x100" %>
    </div>

    <div class="col-8, col-offset-1">
      <table>
        <tr>
          <td>商品名</td>
          <td><%= @item.name %></td>
        </tr>
        <tr>
          <td>商品説明</td>
          <td><%= @item.introduction %></td>
        </tr>
        <tr>
          <td>ジャンル</td>
          <td><%= @item.genre.name %></td>
        </tr>
        <tr>
          <td>税込み価格 <br>（税抜き価格）</td>
          <td>
            <%= @item.add_tax_price.to_s(:delimited) %>円 <br>
            <%= @item.price.to_s(:delimited) %>円
          </td>
        </tr>
        <tr>
          <td>販売ステータス</td>
          <td>
            <% if @item.is_active == true %>
              <p>販売中</p>
            <% elsif @item.is_active == false %>
              <p>販売停止中</p>
            <% end %>
          </td>
        </tr>
      </table>
      <!--カートに商品を入れる-->
      <!--商品が販売中か停止中かで分岐-->
      <% if @item.is_active == false %>
        <p>soldout</p>
      <% else %>
        <!--サインインしているかどうかで分岐-->
        <% if customer_signed_in? %>
          <%= form_with model:@cart_item,url:cart_items_path,method: :post,local:true do |f| %>
            <!--隠れフィールドで商品と顧客(当人)の情報を数量にリンクさせている-->
            <%= f.hidden_field :item_id, value:@item.id %>
            <%= f.hidden_field :customer_id, :value => current_customer.id %>
            <!--選択されていない状態では'個数選択'になるようにする-->
            <%= f.select :amount,[1,2,3,4,5,6,7,8,9,10],{include_blank:'個数選択'},required:true %>
            <%= f.submit 'カートに入れる' %>
          <% end %>
        <% else %>
          <p>注文にはログインが必要です</p>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

